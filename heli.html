
<style>
canvas {
    border: 1px solid #333;
    background: black;
    margin: 20px auto;
    display: block;
    max-width: 100%;
}
</style>

<div style="text-align: center;">
    <h1>Helicopter Game</h1>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const helicopter = {
    x: 100,
    y: 200,
    width: 40,
    height: 20,
    velocity: 0,
    lift: -4.5,  // Made lift stronger
    gravity: 2.0, // Made gravity stronger for snappier feel
    frame: 0,
    frameCount: 2
};

// Create helicopter sprite with a more visible design
function createHelicopterSprite() {
    const canvas = document.createElement('canvas');
    canvas.width = 80;
    canvas.height = 20;
    const ctx = canvas.getContext('2d');
    
    // Frame 1
    ctx.fillStyle = '#3498db';
    ctx.fillRect(0, 5, 30, 10);
    ctx.fillRect(30, 0, 10, 20);
    ctx.fillRect(15, 0, 5, 5);
    
    // Frame 2
    ctx.fillStyle = '#3498db';
    ctx.fillRect(40, 5, 30, 10);
    ctx.fillRect(70, 0, 10, 20);
    ctx.fillRect(55, 0, 5, 5);
    
    return canvas;
}

const heliSprite = createHelicopterSprite();

let isFlying = false;
let gameOver = false;
let score = 0;
let obstacles = [];
let animationFrame = 0;
const gap = 150;
const obstacleWidth = 50;

function createObstacle() {
    const minHeight = 50;
    const maxHeight = canvas.height - gap - minHeight;
    const height = Math.random() * (maxHeight - minHeight) + minHeight;
    
    obstacles.push({
        x: canvas.width,
        y: 0,
        width: obstacleWidth,
        height: height,
        passed: false
    });
    
    obstacles.push({
        x: canvas.width,
        y: height + gap,
        width: obstacleWidth,
        height: canvas.height - height - gap,
        passed: false
    });
}

function drawHelicopter() {
    if (animationFrame % 4 === 0) {
        helicopter.frame = (helicopter.frame + 1) % helicopter.frameCount;
    }
    ctx.drawImage(heliSprite, 
                 helicopter.frame * helicopter.width, 0, 
                 helicopter.width, helicopter.height,
                 helicopter.x, helicopter.y,
                 helicopter.width, helicopter.height);
}

function drawObstacles() {
    ctx.fillStyle = '#2ecc71';
    obstacles.forEach(obstacle => {
        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
    });
}

function checkCollision(rect1, rect2) {
    return rect1.x < rect2.x + rect2.width &&
           rect1.x + rect1.width > rect2.x &&
           rect1.y < rect2.y + rect2.height &&
           rect1.y + rect1.height > rect2.y;
}

function update() {
    animationFrame++;
    
    if (gameOver) {
        ctx.fillStyle = 'white';
        ctx.font = '32px Arial';
        ctx.fillText('Game Over!', canvas.width/2 - 80, canvas.height/2);
        ctx.font = '20px Arial';
        ctx.fillText('Score: ' + score, canvas.width/2 - 40, canvas.height/2 + 30);
        ctx.fillText('Click to restart', canvas.width/2 - 60, canvas.height/2 + 60);
        return;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Snappier physics
    if (isFlying) {
        helicopter.velocity = helicopter.lift;
    } else {
        helicopter.velocity += helicopter.gravity;
    }
    helicopter.y += helicopter.velocity;

    if (obstacles.length === 0 || obstacles[obstacles.length-1].x < canvas.width - 300) {
        createObstacle();
    }

    obstacles.forEach(obstacle => {
        obstacle.x -= 4; // Slightly faster obstacles
        if (checkCollision(helicopter, obstacle)) {
            gameOver = true;
        }
    });

    for (let i = 0; i < obstacles.length; i += 2) {
        if (!obstacles[i].passed && obstacles[i].x + obstacleWidth < helicopter.x) {
            obstacles[i].passed = true;
            score++;
        }
    }

    obstacles = obstacles.filter(obstacle => obstacle.x + obstacle.width > 0);

    if (helicopter.y < 0 || helicopter.y + helicopter.height > canvas.height) {
        gameOver = true;
    }

    drawHelicopter();
    drawObstacles();
    
    ctx.fillStyle = 'white';
    ctx.font = '20px Arial';
    ctx.fillText('Score: ' + score, 10, 30);

    requestAnimationFrame(update);
}

canvas.addEventListener('mousedown', () => {
    if (gameOver) {
        helicopter.y = 200;
        helicopter.velocity = 0;
        obstacles = [];
        score = 0;
        gameOver = false;
        update();
    }
    isFlying = true;
});

canvas.addEventListener('mouseup', () => {
    isFlying = false;
});

// Start the game when page loads
window.addEventListener('load', () => {
    update();
});
</script>
</div>
